Array.prototype.push||(Array.prototype.push=function(t){this[this.length]=t});var EventManager={DEFAULT_EVT_CTX:"DEFAULT_EVT_CTX",_registryMap:null,Initialise:function Initialise(){null==this._registryMap&&(this._registryMap=new Array)},GetCtxKey:function GetCtxKey(t){return null!=t?t.name:this.DEFAULT_EVT_CTX},GetContextualRegistry:function GetContextualRegistry(t){this.Initialise();var e=null,n="string"==typeof t?t:this.GetCtxKey(t);return null==(e=this._registryMap[n])&&(e=new Array,this.SetContextualRegistry(t,e),"string"!=typeof t&&t!=TW()&&this.Add(t,t,"unload","cleanUpEvents()")),e},SetContextualRegistry:function SetContextualRegistry(t,e){this.Initialise();var n=this.GetCtxKey(t);this._registryMap[n]=e},Remove:function Remove(t,e,n){var r=!1;if(null==e)return!1;for(var i=[],l=this.GetContextualRegistry(t),u=0;u<l.length;u++){var a=l[u];try{a.type==e&&(null!=n&&n==a.obj.id||null==n)&&null!=t.document.getElementById(a.obj.id)?null!=a.obj.removeEventListener?(a.obj.removeEventListener(a.type,a.fn,a.useCapture),r=!0):null!=a.obj.detachEvent?(a.obj.detachEvent("on"+a.type,a.fn),r=!0):i.push(l[u]):i.push(l[u])}catch(t){i.push(l[u])}}return r&&this.SetContextualRegistry(t,i),r},Add:function Add(t,e,n,r,i){var l=this.GetContextualRegistry(t);if("string"==typeof e&&(e="document"==e?t.document:"window"==e?t:t.document.getElementById(e)),null==e||null==r)return!1;var u=r;return"string"==typeof r&&(u=createInlineFunction(t,"event",r)),null!=e.addEventListener?(e.addEventListener(n,u,i),l.push({obj:e,type:n,fn:u,useCapture:i}),!0):!(null==e.attachEvent||!e.attachEvent("on"+n,u))&&(l.push({obj:e,type:n,fn:u,useCapture:!1}),!0)},CleanUp:function CleanUp(t){for(var e=Object.keys(this._registryMap),n=0;n<e.length;n++){var r=e[n],i=this.GetContextualRegistry(r);if(null==t||null!=t&&this.GetCtxKey(t)==r){for(var l=0;l<i.length;l++){var u=i[l];try{null!=u.obj.removeEventListener?u.obj.removeEventListener(u.type,u.fn,u.useCapture):null!=u.obj.detachEvent&&u.obj.detachEvent("on"+u.type,u.fn)}catch(t){}i[l]=null}if(null!=t&&this.GetCtxKey(t)==r){this._registryMap[r]=null;break}null==t&&(this._registryMap[r]=null)}}null==t&&(this._registryMap=null)}};function attEvt(t,e,n,r,i,l){var u=r;if(void 0!==l&&""!=l){var a="var l_event = window.event ? window.event : event; ";a+="var l_return = true;",a+="if (l_event && l_event.keyCode == "+l+") {",a+="    l_return = "+r,u=createInlineFunction(t,"event",a+="}; return l_return;")}EventManager.Add(t,e,n,u,i)}function dtcEvt(t,e,n){EventManager.Remove(t,e,n)}function cleanUpEvts(t){EventManager.CleanUp(t)}function getEventTarget(t,e){var n=null;return null==e&&(e=t.event),null==(n=e.target)&&(n=e.srcElement),n}function stopEventPropagation(t){void 0!==t&&(t.stopPropagation?(t.stopPropagation(),t.preventDefault()):void 0!==t.cancelBubble&&(t.cancelBubble=!0))}function createInlineFunction(t,e,n){var r=null!=e?e:"";return t.addEventListener?t.eval("(function("+r+") {"+n+"})"):new t.Function(r,n)}
//# sourceMappingURL=event.js.map
