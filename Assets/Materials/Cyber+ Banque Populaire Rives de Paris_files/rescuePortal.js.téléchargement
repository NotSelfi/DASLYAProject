window.name="Portail Sharepoint Mode Secours";var EQXFrame=null,PORTAL_URL=null,SELF_TARGET="_self",TOP_TARGET="_top",PARENT_TARGET="_parent",NEW_TARGET="_blank",ACTION_START_TASK_SHORTCUT="StartTask.do",URL_TOKEN_PARAMETER="token",URL_TASK_INFO_OID_PARAMETER="taskInfoOID",URL_WEB_APP_TARGET_PARAMETER="webAppTarget",InternetPortalRootPage=!0;function receiveMessage(t){if(t.origin===location.origin&&t.data)try{"NAVIGATION_EQX"===t.data.name&&onEQXNavigation(t.data)}catch(e){console.log("Erreur lors de la reception du postMessage : "+t.data,e)}}function initEQXFrame(){(EQXFrame=document.getElementById("iframeEQX")).src="../ibp/ate/portal/integratedInternet.jsp"+location.search}function onEQXNavigation(t){var e=t.appPortalHeight?t.appPortalHeight:800;sizeEQXFrame(EQXFrame,e),/Edge\/12./i.test(navigator.userAgent)&&setTimeout((function(){sizeEQXFrame(EQXFrame,e+1)}),100),startSK(),startIcgK(),startGsu()}function sizeEQXFrame(t,e){try{var n=null!=e;(EQXFrame.style?EQXFrame.style:EQXFrame).height=e+"px",n&&(document.getElementById("footer").style.visibility="visible")}catch(t){alert(t.message)}}function selectUniverse(t,e,n){if(null!=PORTAL_URL){var i=new Object;if(i.taskId=null!=e?e:t,null!=n&&n.length>0)for(var o=n.split("&"),a=0;a<o.length;a++){var r=o[a].split("="),u=r[0],l=r[1];i[u]=l}postToPage(PORTAL_URL,i)}}function startTask(t,e,n,i,o){var a=buidStartTaskActionTaskURI(t,n,i);null!=e&&"undefined"!=e&&e!=SELF_TARGET?openWindow(a,e,o):window.location.href=a}function buidStartTaskActionTaskURI(t,e,n){return null==t&&alert("[Equinoxe], ["+ACTION_START_TASK_SHORTCUT+"] : l'identifiant de la tâche n'est pas précisé"),buildActionURIwithContextPath(ACTION_START_TASK_SHORTCUT.concat("?",URL_TASK_INFO_OID_PARAMETER,"=",t),e,n)}function openWindow(t,e,n){if(""!=t&&null!=t){var i=e;null!=i&&(i=i.replace(/[''. -]/gi,"_"));var o=addParametersToURL(t,i,n),a=window.open(o,i);try{a.focus()}catch(t){}}}function addParametersToURL(t,e,n){var i=t;return null!=n?(i=i.concat("&",URL_TOKEN_PARAMETER,"=",n),null!=e&&(i=i.concat("&",URL_WEB_APP_TARGET_PARAMETER,"=",e)),i):(Assert.assert(null!=n,"[addTokenParameter] : Le token ne peut être null sur le poste client"),t)}function buildActionURIwithContextPath(t,e,n){return buildURI(concatURI(e,t),n)}function buildURI(t,e){return concatURI(e,t)}function concatURI(t,e){return 0==e.indexOf("/",0)?t+e:t+"/"+e}function logout(t,e,n,i){deleteCookie("PORTAL"),new NGAgentServer(window).cleanFromEquinoxe();var o=getCookie("gsuTimeout");if(deleteCookie(null==o?"icgTimeout":"gsuTimeout"),null!=t){var a=addURIParam(t,"autoLogout","true");jQuery.ajax({url:a,cache:!1,async:!1,complete:function complete(){}})}null!=o&&null!=n?jQuery.ajax({url:n,type:"DELETE",cache:!1,xhrFields:{withCredentials:!0},complete:function complete(t){204!=t.status?window.location.href=e:window.location.href=i}}):window.location.href=e}function PostSubmitForm(t,e){this.submitForm=document.createElement("form"),this.submitForm.setAttribute("method","post"),this.submitForm.setAttribute("id","postSubmitNewForm"),this.submitForm.setAttribute("name","postSubmitNewForm"),this.submitForm.setAttribute("action",t),this.submitForm.setAttribute("target",e),document.body.appendChild(this.submitForm),this.addHiddenField=function(t,e){var n=document.createElement("input");n.setAttribute("name",t),n.setAttribute("value",e),n.setAttribute("type","hidden"),this.submitForm.appendChild(n)},this.submit=function(){this.submitForm.submit()}}function postToPage(t,e){if(void 0!==t){var n=new PostSubmitForm(t,"_top");jQuery.each(e,(function(t,e){n.addHiddenField(t,e)})),n.submit()}}function setCookie(t,e,n){if(null!=t&&null!=t){var i=t+"="+e+";";null!=n&&null!=n&&(i+="expires="+n.toUTCString()+";"),i+="path=/",document.cookie=i}}function getCookie(t){var e=document.cookie.match("(^|;) ?"+t+"=([^;]*)(;|$)");return e?e[2]:null}function deleteCookie(t){if(null!=t&&null!=t){var e=t+"=;";e+="expires=Thu, 01 Jan 1970 00:00:01 GMT;",e+="path=/",document.cookie=e}}function startSK(){null!=SESSION_KEEPER&&SESSION_KEEPER.start()}function startIcgK(){null!=ICG_KEEPER&&ICG_KEEPER.start()}function startGsu(){null!=GSU_KEEPER&&GSU_KEEPER.start()}function TW(){return(EQXFrame=document.getElementById("iframeEQX")).contentWindow}window.addEventListener("message",receiveMessage,!1);
//# sourceMappingURL=rescuePortal.js.map
