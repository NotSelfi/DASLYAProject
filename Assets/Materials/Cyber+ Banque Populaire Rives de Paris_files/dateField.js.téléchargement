function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}var SLCALCOD_HEIGHT=158,MIN_CAL_LEFT_POSITION_IN_FRAME=1,MIN_CAL_TOP_POSITION_IN_FRAME=1,FRAME_DOCUMENT_HORIZONTAL_MARGIN=16,windowRef="getPortalWindow().";function printCalendar(e,t,n,i,o,a,l,s,c,d,r,u,f,g,p,v,h,m,_,T,E){var y=e.getElementById("slcalcod");if(!y){var I='<div class="cal" id="slcalcod" onclick="'+windowRef+'stopEventPropagation(event);">';I+='<div id="calBody">',I+='<div id="calHeader">',I+=getPreviousButton(E),I+=getMonthSelect(E,[c,d,r,u,f,g,p,v,h,m,_,T]),I+=getYearSelect(E),I+=getNextButton(E),I+='<img id="close" alt="" src="',I+=getCloseIcon(),I+='" onclick="'+windowRef+'hcal(document)"/>',I+="</div>",I+='<div id="calDays">';for(var w=getDayLabel(E),S=1;S<=7;S++)I+="<span"+(1==S?" id='fst' ":"")+">"+w(arguments[S])+"</span>";I+="</div>",I+="<div id='calDaysBdy'/>",I+="</div>",I+="</div>";var A=e.getElementById("CAL_DIV");A.innerHTML=I}}function getPreviousButton(e){return getPreviousNextButton(e,"previous")}function getNextButton(e){return getPreviousNextButton(e,"next")}function getPreviousNextButton(e,t){var n="",i="next"===t?"cal_after":"cal_before";isIntranetV2(e)?(n+='<i class="bpce-icon '+("next"===t?"chevron-right":"chevron-left")+'"',n+='onclick="'+windowRef+i+'(document);"></i>'):(n+='<img id="'+t+'" name="'+t+'Month" alt="" src="',n+=buildURIFromSkinRef("next"===t?"image.datePagingNext":"image.datePagingPrevious"),n+='" onclick="'+windowRef+i+'(document);" />');return n}function getMonthSelect(e,t){var n="";if(isIntranetV2(e)){n+='<div id="select-calmois" class="select-div-container">',n+="<div>",n+='<select id="calmois" class="selectbox">',t.forEach((function(e,t){n+="<option value="+(t+1)+">"+e+"</option>"})),n+="</select>",n+="</div>",n+='<div tabindex="0" class="select-selected calmois" onclick="TW.Fwk.app().toggleOptions(event, this, \'calmois\')" onfocusout="TW.Fwk.app().selectDropdownValueOnFocusOut(event, \'calmois\')" ',n+="onkeydown=\"TW.Fwk.app().performKeyAction(event, this, 'calmois')\" ",n+='onkeyup="TW.Fwk.app().removeDropdownKey(event)"',n+="><span>TODO</span></div>",n+='<div class="select-items select-hide"',n+=' onmousedown="Fwk.app().setTargetElement(event)"',n+=' style="width: 84px" onscroll="Fwk.app().setFocusOnDropdown(\''+this.id+"')\">",n+='<div class="select-items-list-items">',t.forEach((function(e){n+="<div onmousedown=\"return Fwk.app().selectDropdownValue(event, this,'calmois')\">"+e+"</div>"})),n+="</div>",n+="</div>",n+="</div>"}else{n+='<select id="calmois" onchange="'+windowRef+'cal_chg(document,-1);">';for(var i=0;i<12;i++)n+="<option value="+(i+1)+">"+t[i]+"</option>";n+="</select>"}return n}function getYearSelect(e){var t="";if(isIntranetV2(e)){t+='<div id="select-calmois" class="select-div-container">',t+="<div>",t+='<select id="calyear" class="selectbox"></select>',t+="</div>",t+='<div tabindex="0" class="select-selected calyear" onclick="TW.Fwk.app().toggleOptions(event, this, \'calyear\')" onfocusout="TW.Fwk.app().selectDropdownValueOnFocusOut(event, \'calyear\')" ',t+="onkeydown=\"TW.Fwk.app().performKeyAction(event, this, 'calyear')\" ",t+='onkeyup="TW.Fwk.app().removeDropdownKey(event)"',t+="><span>TODO</span></div>",t+='<div class="select-items select-hide"',t+=' onmousedown="Fwk.app().setTargetElement(event)"',t+=' style="width: 84px" onscroll="Fwk.app().setFocusOnDropdown(\''+this.id+"')\">",t+='<div class="select-items-list-items">',t+="</div>",t+="</div>",t+="</div>"}else t+='<select id="calyear" onchange="'+windowRef+'cal_chg(document, -1);"></select>';return t}function getCloseIcon(){return buildURIFromSkinRef("image.button.close")}function getDayLabel(e){return isIntranetV2(e)?function(e){return e.substring(0,1)}:function(e){return e}}function initSelected(e){if("selectbox"===e.className){for(var t,n=e.parentNode.nextSibling,i=n.nextSibling.firstChild.childNodes,o=0;o<e.length;o++)if(e.options[o].selected){t=e.options[o].textContent,n.innerHTML="<span>"+t+"</span>";break}for(var a=n.nextSibling.firstChild.getElementsByClassName("same-as-selected"),l=0;l<a.length;l++)a[l].removeAttribute("class");for(var s=0;s<i.length;s++)if(i[s].textContent===t){i[s].setAttribute("class","same-as-selected");break}}}function initSelectYear(e){if("selectbox"===e.className){var t="";t+='<div class="select-items-list-items">',Array.apply(null,e.options).forEach((function(e){t+="<div onmousedown=\"Fwk.app().selectDropdownValue(event, this,'calyear')\">"+e.textContent+"</div>"})),t+="</div>",e.parentNode.nextSibling.nextSibling.innerHTML=t,initSelected(e)}}var prc=printCalendar;function showCalendar(e,t,n,i,o,a){var l=e,s=getDateService();hcal(l);var c=returnEvent(n);stopEventPropagation(c);for(var d=(new Date).getUTCFullYear(),r=null==i?d-104:i,u=d+(null==o?10:o),f=l.getElementById("calyear"),g=r;g<=u;g++)f.options[g-r]=new Option(g,g);f.options.length=u-r+1;var p=l.getElementById("slcalcod");setPosition(l,c,p),p.style.visibility="visible";var v=l.getElementById(t);return s.maj(t,v.value,a),checkDate(s,r,u),cal_chg(l,s),p.focus(),!1}function setPosition(e,t,n){"selectbox"===e.getElementById("calyear").className?setPositionV2(e,t,n):setPositionV1(e,t,n)}function setPositionV1(e,t,n){var i=window.pageYOffset?window.pageYOffset:e.documentElement.scrollTop,o=window.pageXOffset?window.pageXOffset:e.documentElement.scrollLeft,a=t.pageX?t.pageX-o:t.clientX,l=t.pageY?t.pageY-i:t.clientY,s=0!=e.documentElement.clientWidth?e.documentElement.clientWidth:e.documentElement.offsetWidth,c=0!=e.documentElement.clientHeight?e.documentElement.clientHeight:e.documentElement.offsetHeight,d=0!=e.body.clientHeight?e.body.clientHeight:e.body.offsetHeight;d>0&&d<c&&(c=d);var r=window.innerWidth?Math.min(window.innerWidth,s):s,u=window.innerHeight?Math.max(window.innerHeight,c):c,f=a+o+10;a+n.offsetWidth+10>r&&(f=r+o-n.offsetWidth-5),f<MIN_CAL_LEFT_POSITION_IN_FRAME&&(f=MIN_CAL_LEFT_POSITION_IN_FRAME),n.style.left=f+"px";var g=l+i+10;l+SLCALCOD_HEIGHT+10>u&&(g=u+i-SLCALCOD_HEIGHT-5),g<MIN_CAL_TOP_POSITION_IN_FRAME&&(g=MIN_CAL_TOP_POSITION_IN_FRAME),n.style.top=g+"px"}function setPositionV2(e,t,n){var i=navigator.userAgent.toLowerCase(),o=i.indexOf("msie")>-1||i.indexOf("trident")>-1,a=e.documentElement.clientWidth||e.documentElement.offsetWidth,l=e.body.clientHeight||e.body.offsetHeight,s=window.innerWidth?Math.min(window.innerWidth,a):a,c=t.target.parentNode,d=c.offsetLeft,r=c.offsetWidth,u=c.offsetTop,f=c.offsetHeight,g=s-n.offsetWidth,p=d+r/2-n.offsetWidth/2;o||(p+=FRAME_DOCUMENT_HORIZONTAL_MARGIN),p=Math.max(Math.min(p,g),MIN_CAL_LEFT_POSITION_IN_FRAME),n.style.left=p+"px";var v=l-n.offsetHeight,h=u+f;h=Math.max(Math.min(h,v),MIN_CAL_TOP_POSITION_IN_FRAME),n.style.top=h+"px"}var shc=showCalendar;function cal_chg(e,t){var n,i="",o=null,a=null,l=null;-1==t?l=-1:(o=t.getMois(),a=t.getAnnee(),l=t.getJour());var s=e.getElementById("calmois");null==o?o=s.options[s.selectedIndex].value:s.selectedIndex=o-1;var c=e.getElementById("calyear");if(null==a)a=c.options[c.selectedIndex].value;else{var d=a-c.options[0].value;d>=0&&d<c.options.length?c.selectedIndex=d:a=c.options[0].value}if(i="<table id='calDays'><tbody>",o>0){n=1,i+="";for(var r,u=null,f=0;f<6;f++){i+='<tr class="calweek">';for(var g=1;g<8;g++){var p=new Date(a,o-1,n);i+='<td id="day'+f+g+'" class="calday',g>=6&&(i+="we"),p.getDay()==g%7&&p.getDate()==n&&n==l&&(i+="_sel"),i+='" ',p.getDay()==g%7&&p.getDate()==n?(i+='onmouseover="'+windowRef+'dhst(this);" ',i+='onmouseout="'+windowRef+'dust(this);"',(r=""+p.getDate()).length<2&&(r="0"+r),(u=""+o).length<2&&(u="0"+u),i+='onclick="'+windowRef+"dtemaj(document,'"+r+"','"+u+"','"+a+"');\">",i+="<span>"+n+"</span>",n++):i+=">&nbsp;",i+="</td>"}i+="</tr>"}}i+="</tbody></table>",e.getElementById("calDaysBdy").innerHTML=i,initSelectYear(c),initSelected(s)}function cal_before(e){var t,n;return t=e.getElementById("calmois"),n=e.getElementById("calyear"),t.selectedIndex>=1?t.selectedIndex--:n.selectedIndex>0&&(n.selectedIndex--,t.selectedIndex=t.options.length-1),cal_chg(e,-1),!1}function cal_after(e){var t=e.getElementById("calmois"),n=e.getElementById("calyear");return t.selectedIndex<t.options.length-1?t.selectedIndex++:n.selectedIndex<n.options.length-1&&(n.selectedIndex++,t.selectedIndex=0),cal_chg(e,-1),!1}function dtemaj(e,t,n,i){var o=getDateService(),a=e.getElementById(o.getIdField());setDateField(a,o,t,n,i),toggleEraseIcon(o.getIdField()),a.focus(),hcal(e)}function hideCalendar(e){var t=e.getElementById("slcalcod");null!=t&&(t.style.visibility="hidden",e.getElementById("calDaysBdy").innerHTML="")}var hcal=hideCalendar;function getDateService(){return getPortalWindow().DateSelect.getInstance()}function dhst(e){var t=e;null!=t&&("object"!=_typeof(t)||isSelectedDateStyle(t)||-1==t.className.search(CSSConstants.HIGHLIGHTED_DATE_STATE_CLASS)&&(t.className=(t.className+CSSConstants.HIGHLIGHTED_DATE_STATE_CLASS).trim()))}function dust(e){var t=e;null!=t&&("object"!=_typeof(t)||isSelectedDateStyle(t)||(t.className=t.className.replace(CSSConstants.HIGHLIGHTED_DATE_STATE_CLASS,"").trim()))}function isSelectedDateStyle(e){return hasCSSClass(e,CSSConstants.SELECTED_DATE_STATE_CLASS)}function checkDate(e,t,n){for(var i=e.getPattern(),o=e.getDate(),a=new Date,l=null==i||i.indexOf(DAY_PATTERN)<0?"01":a.getDate(),s=null==i||i.indexOf(MONTH_PATTERN)<0?"01":a.getMonth()+1,c=a.getUTCFullYear(),d=getDateSeparator(i),r=i?i.split(d):"",u=o?o.split(d):"",f=u.length,g=a.getMonth(),p=0;p<f;p++){var v=r[p],h=u[p];if(v==DAY_PATTERN&&h&&h.length<=DAY_PATTERN.length)l=u[p];else if(v==MONTH_PATTERN&&h&&h.length<=MONTH_PATTERN.length)isMonth(h)&&(g=parseInt(parseFloat(h))-1,s=1==h.length?"0"+h:h);else if(v==LONG_YEAR_PATTERN&&h&&h.length<=LONG_YEAR_PATTERN.length){if(isGoodYear(h,t,n))c=h;else if(h.length<=SHORT_YEAR_PATTERN.length){var m=new String(c).substring(0,2)+(1==h.length?"0"+h:h);c=isGoodYear(m,t,n)?m:c}}else if(v==SHORT_YEAR_PATTERN&&h&&h.length<=SHORT_YEAR_PATTERN.length){var _=new String(c).substring(0,2)+(1==h.length?"0"+h:h);c=isGoodYear(_,t,n)?_:c}}var T=new Date;T.setYear(c),T.setDate(1),T.setMonth(g),T.setDate(l),new String(T.getMonth())!=g&&(l="01"),e.setJour(l),e.setMois(s),e.setAnnee(c)}function setDateField(e,t,n,i,o){var a=t.getPattern();e.dateFormat||initDateFormat(e,a);var l=e.dateFormat,s=t.getDate().indexOf(l.separator)>=0;s?l.dayPos:l.filteredDayPos;a=swapChar(a,DAY_PATTERN,1==n.length?"0"+n:n),s?l.monthPos:l.filteredMonthPos,a=swapChar(a,MONTH_PATTERN,1==i.length?"0"+i:i),s?l.yearPos:l.filteredYearPos,a=swapChar(a,l.shortYear?SHORT_YEAR_PATTERN:LONG_YEAR_PATTERN,l.shortYear?o.substring(2,4):o),"undefined"!=typeof setFieldValue?setFieldValue(e.id,a):e.value=a}CSSConstants.HIGHLIGHTED_DATE_STATE_CLASS="_high",CSSConstants.SELECTED_DATE_STATE_CLASS="_sel";
//# sourceMappingURL=dateField.js.map
