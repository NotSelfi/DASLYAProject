var _gt=void 0===_gt?[]:_gt,_genesys=void 0===_gt?{}:_genesys,WEB_ENGAGEMENT_UTILS=function(){var e,t;function startGenesys(){var o,s,n,r,c,i,a=TW().portal.webEngagementFrontendHost,l=TW().portal.webEngagementCobrowseHost,g=":"+TW().portal.webEngagementFrontendPort,d=":"+TW().portal.webEngagementFrontendSecurePort,p=":"+TW().portal.webEngagementCobrowsePort,u=":"+TW().portal.webEngagementCobrowseSecurePort,b=TW().portal.webEngagementTrackerDebug,h=TW().portal.webEngagementTrackerDisableWebSockets,w=TW().portal.webEngagementTrackerDslResource,m=TW().portal.webEngagementChatDebug,y=TW().portal.webEngagementCobrowseSetDocumentDomain,f=TW().portal.webengagementCobrowseCssServer,T=TW().portal.webEngagegementTypeBanque;if(window.self===window.top){$("head").append('<link rel="stylesheet" type="text/css" href="'+("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/static/css/chatTemplates_"+T+'.css" media="screen" />');var v=null,E=null,S=function startCobrowseBouton(){console.log("Clic bouton cobrowse"),_genesys.cobrowse.onReady.push((function(e){e.onSessionStarted.addOnce((function(t){console.log("START COBROWSE bouton"),console.log(t),v=t.token,E.sendMessage("{start:"+t.token+"}"),document.getElementById("gwc-chat-cobrowse-bouton").style.visibility="hidden",e.onSessionEnded.addOnce((function(e){console.log("Stop COBROWSE bouton"),console.log(e),v=null,document.getElementById("gwc-chat-cobrowse-bouton").style.visibility="visible"}))})),e.isBrowserSupported()&&!v&&e.startSession()}))};e=function StockChatSession(e){E=e},t=function makeCobrowseButtonVisible(e){e.onAgentConnected((function(){document.getElementById("gwc-chat-cobrowse-bouton").style.visibility="visible",document.getElementById("cobrowse-bouton").onclick=S}))}}_gt.push(["config",{debug:b,dslResource:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/dsl/"+w,httpEndpoint:"http://"+a+g+"/genesys",httpsEndpoint:"https://"+a+d+"/genesys",disableWebSockets:h,preventIframeMonitoring:!1}]),_genesys={disableWebSockets:!0,debug:m,chat:{serverUrl:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/cometd",widgetUrl:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/chatWidget.html",localization:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/locale/chat-fr.json",embedded:!0,registration:!0,ui:{onBeforeRegistration:function onBeforeRegistration(){setTimeout((function(){TW().document.getElementById("#gcbChatSkipRegistration").bind("click",(function(){return $("div.gwc-chat-control.gwc-chat-control-close").click(),!1}))}),0)}},templates:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/static/chatTemplates_"+T+"_"+("https:"==document.location.protocol?"HTTPS":"HTTP")+".html",windowSize:{width:300,height:300},onReady:[function(t){t.onSession(e)}],windowOptions:{left:30,top:30,width:300}},cobrowse:{onReady:[],disableWebSockets:!0,setDocumentDomain:y,localization:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/locale/cobrowse-fr.json",enableStaticResourceService:!0,disableBuiltInUI:!1,css:{server:f}},buttons:{chat:!1,cobrowse:t,position:"left"}},o=document,s="script",n="genesys-js",r={src:("https:"==document.location.protocol?"https://"+a+d:"http://"+a+g)+"/genesys/server/resources/js/build/genesys.min.js",cbUrl:("https:"==document.location.protocol?"https://"+l+u:"http://"+l+p)+"/genesys/cobrowse"},i=o.getElementsByTagName(s)[0],o.getElementById(n)||((c=o.createElement(s)).id=n,c.src=r.src,c.setAttribute("data-gcb-url",r.cbUrl),c.setAttribute("data-gwc-var","_genesys.chat"),c.setAttribute("async","true"),i.parentNode.insertBefore(c,i))}if(("undefined"==typeof isTopWindowMocked?function _isTopWindow(){return window.self===window.top}:isTopWindowMocked)()){window.addEventListener("message",(function receiveMessage(e){try{var t=JSON.parse(e.data);t&&"gwe.startChat"===t.type&&(console.log("should start session"),_genesys.chat.onReady.push((function(e){return e.startChat(t.chatOptions)})))}catch(e){}}),!1)}else t=function makeCobrowseButtonVisible(){},e=function StockChatSession(){},void 0===_genesys&&startGenesys();return{start:startGenesys}}();
//# sourceMappingURL=webEngagement.js.map
